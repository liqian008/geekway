<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bruce.geekway.dao.mapper.WxArticleMapper">

	<!-- 查询指定moduleId的article列表 -->
	<select id="queryArticlesByModuleId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
		select <include refid="Article_Base_Column_List" /> from wx_article wa, wx_code_module_article wcma where wcma.article_id = wa.id and wcma.module_id=#{moduleId,jdbcType=INTEGER} order by wcma.top_time desc;
	</select> 
	
	<!-- 查询不在moduleId中的article列表，供添加 -->
	<select id="queryArticlesOutModuleId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
		select <include refid="Article_Base_Column_List" /> from wx_article wa where wa.id not in (select article_id from wx_code_module_article where module_id=#{moduleId,jdbcType=INTEGER}) order by wa.create_time desc;
	</select> 
	
	
	
	<sql id="Article_Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Mar 29 09:29:23 CST 2014.
    -->
    wa.id, wa.title, wa.short_title, wa.short_content, wa.content, wa.link, wa.status, wa.cover_image_url, wa.cover_thumb_image_url, wa.create_time, 
    wa.update_time
  </sql>
	
</mapper>